function player(){function b(){ctx.fillStyle="#e74c3c",ctx.beginPath(),ctx.arc(mousePos.x,mousePos.y,4,0,2*Math.PI,!1),ctx.closePath(),ctx.fill()}const a=this;a.DEF_HEALTH=10,a.DEF_SPEED=350,a.DEF_DEACC=.9,a.DEF_THRESH=25,a.health=a.DEF_HEALTH,a.angle=0,a.speed=a.DEF_SPEED,a.vel=[0,0],a._size=[30,30],a.pos=[w/2,h/2],a._color="#3498db",a.render=function(c){drawLineBetween(a.pos,[mousePos.x,mousePos.y],"rgba(0, 0, 0, 1.0)",.5),b(),a.calc(),a.updatePosition(c),a.draw()},a.calc=function(){var b=0,c=0;if(keyPressed[68]&&(b+=1),keyPressed[65]&&(b+=-1),keyPressed[87]&&(c+=-1),keyPressed[83]&&(c+=1),0!=b&&0!=c){var d=Math.sqrt(Math.pow(a.speed,2)/2);a.vel=[d*b,d*c]}else 0!=b&&(a.vel[0]=a.speed*b),0!=c&&(a.vel[1]=a.speed*c);a.angle=getAngle([mousePos.x,mousePos.y],a.pos)},a.updatePosition=function(b){keyPressed[65]||keyPressed[68]||(a.vel[0]*=a.DEF_DEACC,Math.abs(a.vel[0])<=a.DEF_THRESH&&(a.vel[0]=0)),keyPressed[87]||keyPressed[83]||(a.vel[1]*=a.DEF_DEACC,Math.abs(a.vel[1])<=a.DEF_THRESH&&(a.vel[1]=0)),a.pos[0]+=a.vel[0]*b,a.pos[1]+=a.vel[1]*b},a.draw=function(){ctx.fillStyle=a._color,ctx.save(),ctx.translate(a.pos[0],a.pos[1]),ctx.rotate(-a.angle),ctx.fillRect(-a._size[0]/2,-a._size[1]/2,a._size[0],a._size[1]),ctx.restore()},window.addEventListener("keydown",function(a){keyPressed[a.keyCode]=!0},!1),window.addEventListener("keyup",function(a){keyPressed[a.keyCode]=!1},!1)}
