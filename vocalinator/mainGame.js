function draw(){clock=new Date,ctx.clearRect(0,0,c.width,c.height),en.renderStack((clock.getTime()-prevTime)/1e3),pl.render((clock.getTime()-prevTime)/1e3),prevTime=clock.getTime(),requestAnimationFrame(draw)}function getMousePos(a,b){var c=a.getBoundingClientRect();return{x:b.clientX-c.left,y:b.clientY-c.top}}var ctx,c,mousePos={x:0,y:0},keyPressed={},pl,enemies,clock,prevTime,w,h;$(document).ready(function(){console.log("ready"),c=document.getElementById("theCanvas"),ctx=c.getContext("2d"),w=window.innerWidth,h=window.innerHeight,c.width=w,c.height=h,c.style.width=w,c.style.height=h,c.addEventListener("mousemove",function(a){mousePos=getMousePos(c,a)},!1),pl=new player,en=new enemies,en.generateStack(),clock=new Date,prevTime=clock.getTime(),draw()}),$(window).resize(function(){console.log("resize"),w=window.innerWidth,h=window.innerHeight,c.width=w,c.height=h,c.style.width=w,c.style.height=h});
